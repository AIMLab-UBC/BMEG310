# **Getting Started with R Visualization**



#### **Basic R Visualization**

The graphics package is used for plotting base graphs like scatter plot, box plot etc. Check the complete list of functions by typing : 

`library(help = "graphics")`



<u>The plot() function</u>

The plot() function is a kind of a generic function for plotting of R objects. Let’s try to build some plots using the provided SalesJan2009.csv dataset.



Load the dataset in R:

`parkinfo = read.csv('NationalParkInfo.csv',header=TRUE, sep=",")`



Explore the newly built object a little bit and check if it is in your desired format. 

`str(parkinfo)`

`head(parkinfo, n=3)`

`tail(parkinfo, n=3)`

`summary(parkinfo)`



Plot a basic scatterplot:

`plot(parkinfo)` 

![img](https://lh4.googleusercontent.com/ysLITIJ7hwmHjAM_EdE8Hlgcz4Ch-N0q3ETzDyVFl_vQfoKIU8dXKtuLNnAdWAmWUzLhG5EHMC_YJJ28KVAvVhOB1mtQw6oXB3mJdfXqyWvrypVUFA8Dw0KI1e0PVJ9XqGDcu-o8)



We get a matrix of scatterplots which is a correlation matrix of all the columns. The plot may show positive correlation, negative correlation or no correlation. We can quickly discover the relationship between variables by merely looking at the plots drawn between them.



Now, to study the relationship between the wildlife_count and park_staff_count:

`plot(parkinfo$Wildlife_Count, parkinfo$Park_Staff_Count)`



![img](https://lh3.googleusercontent.com/4EiTsRf8542RFttgFNEceGABhnCGwbLKvaUd0F7ZW8H7y_-1z0T450Z53_P5CgP8QbL_fvPULjlixFMOUCh4PiIhsbxr55rxmdR9TzvdFPImROpXeWRJuTAalXujbvGnTfmks7Vu)

The plot shows mostly a positive correlation.



<u>Using arguments with the plot() function</u>

We can easily style our charts by using different arguments of the plot() function. One of them is the *type* argument.



*type argument:*

The plot function has the *type* argument that takes in values like p: points, l: lines, b: points & lines, h: high-density vertical lines. This decides the output graph shape.

`plot(parkinfo$Wildlife_Count, type="b")`



![img](https://lh3.googleusercontent.com/MGzpm9-4HXIiWCqngI4dPzU-Ssa-TsDrO_o3Eun9hTYwqsIC7saeJD0WY6DnZX-F5aCFSIVjlc-aLd392yBY-IOAIrm9Z-U0JnMhHXq_r-2EsGWhZAHXgWQJK8TUmApHppiWWvk-)



We can also label the X and the Y axis and give a title and color to the plot. 

`plot(parkinfo$Wildlife_Count, xlab = 'Parks', ylab = 'Wildlife Count', main = 'Wildlife Count in National Parks around the World', col = 'blue')`



![img](https://lh5.googleusercontent.com/n7r2JMjcqoiP18VulzbleWNIA4MrkeYtyANWJhgsHC_PMp2bv3YKOlqaTWRcw6RQichTumNNl_ascdZL0RgK8bjN6i4VowD3fltrkBb6F1sVVWESM0fIlFNl07VtHqSRrRfwARDq)



<u>Barplot</u>

In a bar plot, data is represented in the form of rectangular bars and the length of the bar is proportional to the value of the variable or column in the dataset. Both horizontal, as well as a vertical bar chart, can be generated by tweaking the *horiz* parameter.



\# Horizontal bar plot

`barplot(parkinfo$Wildlife_Count, main = 'Wildlife Count in National Parks around the World',xlab = 'Wildlife Count', col= 'green',horiz = TRUE)`



![img](https://lh5.googleusercontent.com/mynC181c9dZ9Zx-iHDUiL5u3YVXKWtDz3i3tvG4ieRepQ9vcFvBebpNtBbEHo_XfPhlp6tsCqOEX7tNQPHMIjMosedYxKBAYprGtnKh7XBGoPz9EiKmfkj7gAW3oLeO7o2N4NOAH)



<u>Histogram</u>

A histogram is similar to a bar chart except that it groups values into continuous ranges. It represents frequencies of values of a variable bucketed into ranges.

`hist(parkinfo$Entry_Fee,main = 'Entry Fee for National Parks',xlab = 'Entry Fee', col='red')`



![img](https://lh4.googleusercontent.com/bGQbxWadkZ8PRHujkI3HWg5KZoXEaYjbj7QoruYaS7G9OvxvHr3CRRsHPAcAO4t_sNSXACQUpepUNyM7UfejEQqM32g8aJ6V60c8tPJ6gDMqk1qqZY7TLV6C8RwpKhPsQygz1IqR)



<u>Boxplot</u>

Boxplot is graphical representation of the *summary()* command in the form of quartiles.



\#Single box plot

`boxplot(parkinfo$Entry_Fee)`



![img](https://lh4.googleusercontent.com/xERCUJBPog7m7jL8v2TzDs3VrdlNjG4Xf_nxcTXLYmLI-GEmZ4FCywsBOIwfJhk41OqTIVHvJmdrBY_zmtTVyHym482oP0bXqBsxpyJ76oRZVkYbGZOH5VaoVxqdinUwVEAFdX7f)



\# Multiple box plots

`boxplot(parkinfo[,3], parkinfo[,4], parkinfo[,6], parkinfo[,7], main='Multiple Box plots')`



![img](https://lh3.googleusercontent.com/jaOAVEIViPXv6bYp-LDcCDXqvLbRUd5p8ylB8rdbm5p_o_6eLFTpxwWQDUuyoiLQV_YIfiqw6xiiN_bzOCBg5OMkc5sAHbsk-GoYRizmULhv6Njo0EErvVtj60h772FpQbK9QUcn)



<u>Grid of Charts</u>

This is a very useful feature in R with which we can plot multiple charts at once. You can plot different types of graphs at once and then pick and choose which one explains your data more informatively.

For drawing a grid, the first argument should specify certain attributes like the margin of the grid(mar), no of rows and columns(mfrow), whether a border is to be included(bty) and position of the labels(las: 1 for horizontal, las: 0 for vertical).



`par(mfrow=c(3,3), mar=c(2,5,2,1), las=1, bty="n")`

`plot(parkinfo$Entry_Fee)`

`plot(parkinfo$Entry_Fee, parkinfo$Visitor_Each_Year)`

`plot(parkinfo$Wildlife_Count, type="c")`

`plot(parkinfo$Park_Staff_Count, type="h")`

`plot(parkinfo$Visitor_Each_Year, type="s")`

`barplot(parkinfo$Entry_Fee, main = 'Entry Fee in National Parks',xlab = 'Entry Fee', col='green',horiz = TRUE)`

`hist(parkinfo$Park_Staff_Count)`

`boxplot(parkinfo[,3], parkinfo[,6], main='Multiple Box plots')`



![img](https://lh4.googleusercontent.com/3p1GsenunUpUJlFcxC_XFXEcQHNCL4qasVQzuy9Y_2fa5sARVdl_fdi15gz_E7ng_kxnfDgdsrLCmx2K4uBNtK1qJWA3VMP1CiL_-B7guO5gaKKISM1zhbG4soXYQqDjADmb89_9)



**Note**: To know more: type *?plot* name.





#### **Visualization libraries in R**



R already comes with sophisticated visualization libraries such as Lattice graphs, Plotly, and ggplot2. Here, we will discuss ggplot2.ggplot2 visualization package in R is very widely used in the scientific community. It allows for sophisticated visualizations with very little coding. ggplot2 is also popular because it is capable of creating graphs that contain both univariate and multivariate data.



\#Installing & Loading the package  

`install.packages(“ggplot2”)`

`library(ggplot2)`



#Loading the dataset

`attach(parkinfo)`



<u>Scatterplots using ggplot2</u>

`ggplot(data = parkinfo, mapping = aes(x = Wildlife_Count, y = Park_Staff_Count)) + geom_point()`



![img](https://lh4.googleusercontent.com/BDTNyK3aaUG3PpK-9cNsqoqT9roXWY5mQgfhHz6VLLYn-PZ0mGRidZDertQxtHTQGUhiRxF5ugMO6GRclnWuyAo7BXKa4Kb6-Wb2NrkMixlbvk4gbyhYsjYf0CWLUdwEpUgyiTJ-)



\#Styling scatter plots by factor

`ggplot(data = parkinfo, mapping = aes(x = Wildlife_Count, y = Park_Staff_Count, color = as.factor(Park_Country))) + geom_point()`

![img](https://lh3.googleusercontent.com/EmQCtmyEhbGgXbiA_e5Z2pBRqkwEnD47nWu5zv4Ftlh59dEdF48ZQTkJNpQQj9N2UNLcrjQUXUtfSFOLSeC03IAGmUliz1aQgdrsKxNtbpd9Xgl9vSkr-PGv1TI-qSKADuvyk7Tv)



\#Styling scatter plots by size

`ggplot(data = parkinfo, mapping = aes(x = Wildlife_Count, y = Park_Staff_Count, size = Visitor_Each_Year)) + geom_point()`



![img](https://lh6.googleusercontent.com/un-QphSEfUU_wOV4gZbhHUlSW7uIIfsxtbQ6pf0Mfwph4eg1EhvY5zKVb9QdfqvxXqkdyxRC1nbpoluhWGm9fGr8sa3o_kRnhXx-V8Clw8wzgH0p-c0m2r8X-vybYGgv2O2MsHMV)



#Different symbols for different sizes

`p <- ggplot(parkinfo,aes(Wildlife_Count, Park_Staff_Count, shape = factor(Park_Country)))`

`p + geom_point(aes(colour = factor(Park_Country)), size = 4) + geom_point(colour = "grey90", size = 1.5)`

![img](https://lh6.googleusercontent.com/PO6bUmXA1uK77wTISSOWen5EFaLN1ASSR0EdIrMLBZifh6K0LQxhAvWN_fETaZYWU4Q2-yyRlqjNHM_Zmwm2FqY9eGu_sZStvVTXw4uYoXpgzqKa7wXNfL-CReUIkRS40joUEevM)



**Note**: You have a ggplot2 cheatsheet attached with this tutorial. Please refer that in case of any concerns.



<u>Heatmaps using ggplot2</u>

For a basic heatmap, we will use the geom_tile() function of ggplot2. Here, the input data must be a long format (check this link for further explanation on long and wide formats along with the conversion details: http://www.cookbook-r.com/Manipulating_data/Converting_data_between_wide_and_long_format/) where each row provides an observation. At least 3 variables are needed per observation:

​	x: position on the X axis
​	y: position on the Y axis
​	fill: the numeric value that will be translated in a color



Let's try:

`library(ggplot2)`



\#dummy data

`x <- LETTERS[1:20]`
`y <- paste0("var", seq(1,20))`
`data <- expand.grid(X=x, Y=y)`
`data$Z <- runif(400, 0, 5)`



\#Heatmap 

`ggplot(data, aes(X, Y, fill= Z)) + geom_tile()`



![img](https://lh6.googleusercontent.com/U-ZJnqJFc1i00WeOB1Ridzbl6B0ThG7izBxbDE4VGqlvL4bemUKVjGnz3Qh0PSitgDQeoRTK6k74Px2_DfFZ-xgIoKQrje6hrRs9Bulvll0Bh2ueDHlw-R-jGdjFzwKWbKonK11V)





##### <u>**Exercise**</u>:

The data for the exercise is accessible from EconomistData.csv file. Use ggplot2 and the following to answer below questions. Please submit your R code and the five plots as an R markdown HTML document. 

dat <- read_csv("EconomistData.csv")

\## column specification in the EconomistData dataset:

​	\##  Country = character, HDI.Rank = integer, HDI = double, CPI = double, Region = character



Submit the following five plots:

1. Create a scatter plot with CPI on the x axis and HDI on the y axis.
2. Create a scatter plot with CPI on the x axis and HDI on the y axis and color the points blue.
3. Create a scatter plot with CPI on the x axis and HDI on the y axis and color the points according to *Region*.
4. Create a scatter plot with CPI on the x axis and HDI on the y axis and set point size to 2 so that the points bigger than in other plots.
5. Create a scatter plot with CPI on the x axis and HDI on the y axis and map the size of the points to HDI.Rank.



<u>Additional resources for ggplot2</u>:

​	Wiki: https://github.com/hadley/ggplot2/wiki

​	Mailing list: http://groups.google.com/group/ggplot2

​	Website: http://had.co.nz/ggplot2/